default:
  image: python:3.8

stages:
  - test
  - build
  - release

smoke_test:
    stage: test
    image: docker:stable
    services:
      - docker:dind
    script:
      - apk add --no-cache docker-compose
      - docker-compose build backend frontend telegram-bot

check_formatting:
    stage: test
    script:
      - pip install -r requirements.txt
      - echo "Testing..."
      - black --check backend/ frontend/ telegram-bot/
